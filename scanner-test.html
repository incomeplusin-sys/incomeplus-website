<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scanner Test - IncomePlus</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f8fafc; }
        
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        
        /* Scanner Box */
        .scanner-box { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        
        h1 { color: #333; margin-bottom: 10px; }
        .subtitle { color: #666; margin-bottom: 30px; }
        
        /* Controls */
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
        .control-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #555; }
        select, input { width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; }
        
        /* Results */
        .results { margin-top: 30px; }
        .result-item { background: #f8fafc; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 4px solid #4f46e5; }
        .stock { font-weight: bold; color: #333; }
        .signal { margin: 5px 0; }
        .confidence { font-size: 0.9rem; color: #666; }
        
        /* Buttons */
        .btn { background: #4f46e5; color: white; border: none; padding: 12px 25px; border-radius: 5px; cursor: pointer; font-weight: bold; margin: 5px; }
        .btn:hover { background: #4338ca; }
        .btn-secondary { background: #666; }
    </style>
</head>
<body>
    <div class="container">
        <div class="scanner-box">
            <h1>Volume-Price Scanner Test</h1>
            <p class="subtitle">Test the scanner functionality with dummy data</p>
            
            <!-- Scanner Controls -->
            <div class="controls">
                <div class="control-group">
                    <label for="timeframe">Timeframe</label>
                    <select id="timeframe">
                        <option value="1d">Daily</option>
                        <option value="1h">Hourly</option>
                        <option value="15m">15 Minutes</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="lookback">Lookback Period</label>
                    <select id="lookback">
                        <option value="7">7 Days</option>
                        <option value="15">15 Days</option>
                        <option value="30">30 Days</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="minConfidence">Min Confidence (%)</label>
                    <input type="range" id="minConfidence" min="50" max="95" value="70">
                    <span id="confidenceValue">70%</span>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div>
                <button class="btn" onclick="runScanner()">Run Scanner Test</button>
                <button class="btn btn-secondary" onclick="resetScanner()">Reset</button>
                <button class="btn" onclick="window.location.href='dashboard.html'">Back to Dashboard</button>
            </div>
            
            <!-- Results Area -->
            <div class="results" id="resultsArea">
                <h3>Results will appear here...</h3>
                <div id="resultsContainer"></div>
            </div>
            
            <!-- Test Notes -->
            <div style="margin-top: 30px; padding: 15px; background: #f0f9ff; border-radius: 5px; border-left: 4px solid #4f46e5;">
                <strong>Test Notes:</strong>
                <p style="margin-top: 10px; font-size: 0.9rem;">
                    1. This is a testing interface<br>
                    2. Click "Run Scanner Test" to see dummy results<br>
                    3. Results refresh with each click<br>
                    4. In production, this would connect to real market data
                </p>
            </div>
        </div>
    </div>

    <script>
        // Update confidence value display
        const confidenceSlider = document.getElementById('minConfidence');
        const confidenceValue = document.getElementById('confidenceValue');
        
        confidenceSlider.addEventListener('input', function() {
            confidenceValue.textContent = this.value + '%';
        });
        
        // Sample stocks data
        const sampleStocks = [
            { symbol: 'RELIANCE', name: 'Reliance Industries', price: 2456.75 },
            { symbol: 'TCS', name: 'Tata Consultancy', price: 3450.50 },
            { symbol: 'HDFCBANK', name: 'HDFC Bank', price: 1650.25 },
            { symbol: 'INFY', name: 'Infosys', price: 1550.80 },
            { symbol: 'ICICIBANK', name: 'ICICI Bank', price: 1050.40 },
            { symbol: 'ITC', name: 'ITC Ltd', price: 450.60 },
            { symbol: 'SBIN', name: 'State Bank', price: 650.30 },
            { symbol: 'BHARTIARTL', name: 'Airtel', price: 1150.90 }
        ];
        
        // Signals
        const signals = [
            { type: 'Bullish', color: '#10b981', icon: 'ðŸ“ˆ' },
            { type: 'Bearish', color: '#fc5c65', icon: 'ðŸ“‰' },
            { type: 'Neutral', color: '#f59e0b', icon: 'âž¡ï¸' }
        ];
        
        // Run scanner
        function runScanner() {
            const minConfidence = parseInt(confidenceSlider.value);
            const resultsContainer = document.getElementById('resultsContainer');
            
            // Clear previous results
            resultsContainer.innerHTML = '';
            
            // Generate random results
            let resultsCount = 0;
            
            sampleStocks.forEach(stock => {
                // Random chance to include this stock
                if(Math.random() > 0.4) {
                    const signal = signals[Math.floor(Math.random() * signals.length)];
                    const confidence = Math.floor(Math.random() * (100 - minConfidence) + minConfidence);
                    
                    // Create result item
                    const resultItem = document.createElement('div');
                    resultItem.className = 'result-item';
                    resultItem.innerHTML = `
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div class="stock">${stock.symbol} - ${stock.name}</div>
                                <div class="signal" style="color: ${signal.color}">
                                    ${signal.icon} ${signal.type} Signal
                                </div>
                                <div class="confidence">
                                    Confidence: ${confidence}% | Price: â‚¹${stock.price.toFixed(2)}
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 0.8rem; color: #666;">${document.getElementById('timeframe').value}</div>
                                <button onclick="analyzeStock('${stock.symbol}')" style="margin-top: 5px; padding: 5px 10px; background: #4f46e5; color: white; border: none; border-radius: 3px; cursor: pointer;">
                                    Analyze
                                </button>
                            </div>
                        </div>
                    `;
                    
                    resultsContainer.appendChild(resultItem);
                    resultsCount++;
                }
            });
            
            // Update heading
            document.querySelector('#resultsArea h3').textContent = `Found ${resultsCount} Signals`;
            
            // Show success message
            if(resultsCount > 0) {
                showMessage(`Scanner found ${resultsCount} signals with confidence â‰¥ ${minConfidence}%`, 'success');
            } else {
                showMessage('No signals found with current settings. Try lowering confidence threshold.', 'info');
            }
        }
        
        // Reset scanner
        function resetScanner() {
            confidenceSlider.value = 70;
            confidenceValue.textContent = '70%';
            document.getElementById('resultsContainer').innerHTML = '';
            document.querySelector('#resultsArea h3').textContent = 'Results will appear here...';
            showMessage('Scanner reset to default settings', 'info');
        }
        
        // Analyze stock
        function analyzeStock(symbol) {
            alert(`Analyzing ${symbol}...\n\nIn production, this would show detailed analysis charts and historical data.`);
        }
        
        // Show message
        function showMessage(message, type) {
            // Remove existing message
            const existingMsg = document.querySelector('.scanner-message');
            if(existingMsg) existingMsg.remove();
            
            // Create new message
            const msgDiv = document.createElement('div');
            msgDiv.className = `scanner-message scanner-${type}`;
            msgDiv.innerHTML = message;
            
            // Add styles
            if(!document.querySelector('#scanner-message-style')) {
                const style = document.createElement('style');
                style.id = 'scanner-message-style';
                style.textContent = `
                    .scanner-message {
                        padding: 15px;
                        margin: 20px 0;
                        border-radius: 5px;
                        font-weight: bold;
                    }
                    .scanner-success {
                        background: #d1fae5;
                        color: #065f46;
                        border-left: 4px solid #10b981;
                    }
                    .scanner-info {
                        background: #e0f2fe;
                        color: #075985;
                        border-left: 4px solid #0ea5e9;
                    }
                `;
                document.head.appendChild(style);
            }
            
            // Insert after controls
            const controls = document.querySelector('.controls');
            controls.parentNode.insertBefore(msgDiv, controls.nextSibling);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if(msgDiv.parentNode) msgDiv.remove();
            }, 5000);
        }
        
        // Initialize
        window.onload = function() {
            console.log('Scanner Test Page Loaded');
            // Auto-run scanner after 1 second
            setTimeout(runScanner, 1000);
        };
    </script>
</body>
</html>
